Version 4
SHEET 1 2592 1152
WIRE 720 -704 -1232 -704
WIRE 752 -672 -1232 -672
WIRE 784 -640 -1232 -640
WIRE 544 -544 544 -576
WIRE 544 -544 448 -544
WIRE 640 -544 544 -544
WIRE -1088 -480 -1184 -480
WIRE -768 -480 -960 -480
WIRE 80 -480 -80 -480
WIRE 192 -480 80 -480
WIRE 304 -480 192 -480
WIRE 384 -480 304 -480
WIRE 448 -480 448 -544
WIRE 544 -480 544 -544
WIRE -1184 -464 -1184 -480
WIRE -960 -464 -960 -480
WIRE 304 -448 304 -480
WIRE 640 -448 640 -464
WIRE -80 -400 -80 -480
WIRE 448 -368 448 -400
WIRE 448 -368 352 -368
WIRE 720 -368 720 -704
WIRE 720 -368 448 -368
WIRE 1248 -368 720 -368
WIRE -1184 -352 -1184 -384
WIRE -960 -352 -960 -384
WIRE 192 -320 192 -480
WIRE -80 -272 -80 -320
WIRE -1296 -256 -1296 -288
WIRE -1072 -256 -1104 -256
WIRE -960 -256 -992 -256
WIRE 544 -240 544 -400
WIRE 544 -240 240 -240
WIRE 752 -240 752 -672
WIRE 752 -240 544 -240
WIRE 1136 -240 752 -240
WIRE 80 -192 80 -480
WIRE -1168 -176 -1168 -256
WIRE -1104 -176 -1168 -176
WIRE -960 -176 -960 -256
WIRE -960 -176 -1040 -176
WIRE -944 -176 -960 -176
WIRE -816 -176 -864 -176
WIRE -768 -176 -768 -480
WIRE -256 -176 -768 -176
WIRE 640 -112 640 -384
WIRE 640 -112 128 -112
WIRE 672 -112 640 -112
WIRE 784 -112 784 -640
WIRE 784 -112 672 -112
WIRE -960 -96 -960 -176
WIRE -960 -96 -992 -96
WIRE -1296 -80 -1296 -176
WIRE -1296 -80 -1344 -80
WIRE -1280 -80 -1296 -80
WIRE -1168 -80 -1168 -176
WIRE -1168 -80 -1216 -80
WIRE -1056 -80 -1168 -80
WIRE -960 -64 -992 -64
WIRE 1136 -48 1136 -240
WIRE 1248 -48 1248 -368
WIRE 640 -32 640 -112
WIRE -16 -16 -64 -16
WIRE 304 -16 304 -352
WIRE 304 -16 64 -16
WIRE 1328 0 1312 0
WIRE -288 32 -1344 32
WIRE 544 48 544 -240
WIRE 592 48 544 48
WIRE 1136 64 1136 48
WIRE 1248 64 1248 48
WIRE -256 80 -256 -176
WIRE -208 80 -256 80
WIRE -64 80 -64 -16
WIRE -64 80 -128 80
WIRE -16 80 -64 80
WIRE 192 80 192 -224
WIRE 192 80 64 80
WIRE 640 80 640 64
WIRE 1200 96 1200 0
WIRE 1328 96 1328 0
WIRE -960 112 -960 -64
WIRE 672 128 672 -112
WIRE -64 192 -64 80
WIRE -64 192 -128 192
WIRE -16 192 -64 192
WIRE 80 192 80 -96
WIRE 80 192 64 192
WIRE 384 192 384 -480
WIRE -288 208 -288 32
WIRE -192 208 -288 208
WIRE 448 208 448 -368
WIRE 624 208 448 208
WIRE -960 224 -960 192
WIRE -64 224 -128 224
WIRE 672 240 672 224
WIRE -1264 256 -1264 224
WIRE -1200 256 -1264 256
WIRE -1136 256 -1136 224
WIRE -1136 256 -1200 256
WIRE -576 256 -624 256
WIRE -544 256 -576 256
WIRE -352 256 -464 256
WIRE 80 256 80 192
WIRE 192 256 192 80
WIRE 304 256 304 -16
WIRE -1200 272 -1200 256
WIRE 1072 272 1024 272
WIRE 1328 272 1328 176
WIRE 1328 272 1152 272
WIRE 1024 288 1024 272
WIRE 688 304 672 304
WIRE 864 304 752 304
WIRE 672 352 672 304
WIRE 752 352 672 352
WIRE 864 352 864 304
WIRE 864 352 832 352
WIRE -576 368 -576 256
WIRE -576 368 -608 368
WIRE -288 368 -288 208
WIRE -176 368 -288 368
WIRE -64 368 -64 224
WIRE -64 368 -96 368
WIRE -16 368 -64 368
WIRE 80 368 80 336
WIRE 80 368 64 368
WIRE 192 368 192 336
WIRE 192 368 80 368
WIRE 304 368 304 336
WIRE 304 368 192 368
WIRE 384 368 384 256
WIRE 384 368 304 368
WIRE -816 384 -816 -176
WIRE -816 384 -880 384
WIRE -704 384 -704 256
WIRE -704 384 -816 384
WIRE -672 384 -704 384
WIRE -576 400 -608 400
WIRE 80 400 80 368
WIRE 80 400 -64 400
WIRE 304 400 80 400
WIRE 80 416 80 400
WIRE -352 464 -352 256
WIRE 0 464 -352 464
WIRE 304 464 304 400
WIRE 480 464 304 464
WIRE 672 464 672 352
WIRE 672 464 560 464
WIRE 736 464 672 464
WIRE 864 480 864 352
WIRE 864 480 800 480
WIRE 912 480 864 480
WIRE 1024 480 1024 352
WIRE 1024 480 992 480
WIRE 1072 480 1024 480
WIRE 736 496 672 496
WIRE 1200 496 1200 176
WIRE 1200 496 1136 496
WIRE 1264 496 1200 496
WIRE -768 512 -768 -176
WIRE -704 512 -768 512
WIRE -576 512 -576 400
WIRE -576 512 -624 512
WIRE -544 512 -576 512
WIRE -64 512 -64 400
WIRE -64 512 -464 512
WIRE 0 512 0 464
WIRE 80 512 80 496
WIRE 80 512 0 512
WIRE 144 512 80 512
WIRE 240 512 224 512
WIRE 672 512 672 496
WIRE 672 512 240 512
WIRE 1072 512 1024 512
WIRE 1200 528 1200 496
WIRE 1264 528 1264 496
WIRE 80 544 80 512
WIRE 912 576 896 576
WIRE 1024 576 1024 512
WIRE 1024 576 992 576
WIRE 352 592 304 592
WIRE 368 592 352 592
WIRE 480 592 448 592
WIRE 608 592 480 592
WIRE 816 592 688 592
WIRE 896 592 896 576
WIRE 896 592 816 592
WIRE 240 608 240 512
WIRE 1024 624 1024 576
WIRE 1040 624 1024 624
WIRE 1200 624 1200 592
WIRE 1200 624 1120 624
WIRE 1264 624 1264 608
WIRE 1264 624 1200 624
WIRE 480 656 480 592
WIRE 512 656 480 656
WIRE 816 672 816 592
WIRE 816 672 576 672
WIRE 512 688 464 688
WIRE 240 704 240 688
WIRE 464 704 464 688
WIRE 352 800 352 592
WIRE 368 800 352 800
WIRE 480 800 448 800
WIRE 608 800 480 800
WIRE 720 800 688 800
WIRE 864 816 864 480
WIRE 912 816 864 816
WIRE 1072 816 992 816
WIRE 1200 832 1136 832
WIRE 1264 832 1200 832
WIRE 1328 832 1328 272
WIRE 1328 832 1264 832
WIRE 1072 848 1024 848
WIRE 1264 848 1264 832
WIRE 480 880 480 800
WIRE 512 880 480 880
WIRE 1200 880 1200 832
WIRE 720 896 720 800
WIRE 720 896 576 896
WIRE 912 896 720 896
WIRE 1024 896 1024 848
WIRE 1024 896 992 896
WIRE 512 912 464 912
WIRE 464 928 464 912
WIRE 1024 944 1024 896
WIRE 1040 944 1024 944
WIRE 1200 944 1120 944
WIRE 1264 944 1264 928
WIRE 1264 944 1200 944
FLAG -1200 272 0
FLAG -1264 144 Vcc
FLAG -160 240 Vcc
FLAG -1136 144 Vee
FLAG -160 176 Vee
FLAG -80 -272 0
FLAG 80 544 0
FLAG 640 80 0
FLAG 672 240 0
FLAG 544 -576 Vcc
FLAG 768 448 Vcc
FLAG 768 512 Vee
FLAG 1104 464 Vcc
FLAG 1104 528 Vee
FLAG 1104 800 Vcc
FLAG 1104 864 Vee
FLAG 1248 64 0
FLAG 1136 64 0
FLAG -960 -352 0
FLAG -1024 -112 Vcc
FLAG -1024 -48 Vee
FLAG -960 224 0
FLAG -1296 -288 Vcc
FLAG -1344 -80 I_CTRL
FLAG -1344 32 I_MON
FLAG -1232 -704 CURR_5A
FLAG -1232 -672 CURR_500MA
FLAG -1232 -640 CURR_50MA
FLAG 544 640 Vcc
FLAG 544 704 Vee
FLAG 544 864 Vcc
FLAG 544 928 Vee
FLAG 464 928 0
FLAG 464 704 0
FLAG 304 592 Vref
FLAG 240 704 0
FLAG -1184 -352 0
FLAG -1088 -480 Vref
FLAG -640 352 Vcc
FLAG -640 416 Vee
FLAG -880 384 I_LIM
SYMBOL res 64 240 R0
SYMATTR InstName R1
SYMATTR Value 1R
SYMBOL res 176 240 R0
SYMATTR InstName R2
SYMATTR Value 0.1R
SYMBOL res 288 240 R0
SYMATTR InstName R3
SYMATTR Value 0.01R
SYMBOL res 80 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 3K3
SYMBOL res 80 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 3K3
SYMBOL res 80 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 3K3
SYMBOL res -112 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 158K
SYMBOL res 80 352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 1K1
SYMBOL res -80 352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 158K
SYMBOL voltage -1264 128 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL voltage -1136 240 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL schottky 368 192 R0
SYMATTR InstName D1
SYMATTR Value MBRB2545CT
SYMBOL current -80 -320 R180
WINDOW 0 24 80 Left 2
WINDOW 3 -392 185 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Iload
SYMATTR Value PWL(10m 0 20m 50m 30m 500m 40m 5A)
SYMBOL res 64 400 R0
SYMATTR InstName R10
SYMATTR Value 0.02R
SYMBOL res 432 -496 R0
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL res 528 -496 R0
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL res 624 -560 R0
SYMATTR InstName R13
SYMATTR Value 1k
SYMBOL res 576 448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 1K
SYMBOL res 848 336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 249K
SYMBOL res 1008 464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 10k
SYMBOL res 1008 800 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 10k
SYMBOL diode 1008 288 R0
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL res 1168 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 1k
SYMBOL res 1008 880 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 100R
SYMBOL res 1008 560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R22
SYMATTR Value 100R
SYMBOL res 1184 80 R0
SYMATTR InstName R25
SYMATTR Value 2k2
SYMBOL res 1312 80 R0
SYMATTR InstName R26
SYMATTR Value 2k2
SYMBOL pnp 1312 48 R180
WINDOW 0 25 43 Left 2
WINDOW 3 -58 97 Left 2
SYMATTR InstName Q1
SYMATTR Value BC556B
SYMBOL pnp 1200 48 R180
WINDOW 0 47 48 Left 2
WINDOW 3 76 115 Left 2
SYMATTR InstName Q2
SYMATTR Value BC556B
SYMBOL res 1136 608 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 10k
SYMBOL cap 1184 528 R0
SYMATTR InstName C1
SYMATTR Value 10n
SYMBOL res 1136 928 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 10K
SYMBOL cap 1184 880 R0
SYMATTR InstName C2
SYMATTR Value 10n
SYMBOL voltage -960 -480 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -47 47 Right 2
WINDOW 3 -49 71 Right 2
SYMATTR InstName GCOM
SYMATTR Value 0.05
SYMBOL voltage -960 96 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I_SET
SYMATTR Value 0.2
SYMBOL res -848 -192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R32
SYMATTR Value 10k
SYMBOL res -976 -272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R33
SYMATTR Value 11k
SYMBOL cap -1104 -272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 1n
SYMBOL diode -1104 -160 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL diode -1280 -64 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL res -1312 -272 R0
SYMATTR InstName R35
SYMATTR Value 5k
SYMBOL diode 624 -448 R0
SYMATTR InstName D5
SYMATTR Value 1N4148
SYMBOL res 704 576 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R38
SYMATTR Value 1k
SYMBOL res 464 784 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R39
SYMATTR Value 10k
SYMBOL res 704 784 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R40
SYMATTR Value 10k
SYMBOL res 464 576 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R41
SYMATTR Value 10k
SYMBOL res 240 496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R42
SYMATTR Value 1K
SYMBOL res 256 704 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R43
SYMATTR Value 249K
SYMBOL nmos 592 -32 R0
SYMATTR InstName M5
SYMATTR Value 2N7002
SYMBOL nmos 624 128 R0
SYMATTR InstName M4
SYMATTR Value 2N7002
SYMBOL Opamps\\opamp2 -1024 -144 M0
WINDOW 3 21 110 Left 2
SYMATTR Value MC33274/MC
SYMATTR InstName U14
SYMBOL Opamps\\opamp2 -160 272 R180
WINDOW 3 22 103 Left 2
WINDOW 0 22 128 Left 2
SYMATTR Value MC33274/MC
SYMATTR InstName U5
SYMBOL Opamps\\opamp2 544 832 R0
WINDOW 3 21 110 Left 2
SYMATTR Value MC33274/MC
SYMATTR InstName U1
SYMBOL Opamps\\opamp2 1104 768 R0
WINDOW 3 26 35 Left 2
WINDOW 0 24 11 Left 2
SYMATTR Value MC33274/MC
SYMATTR InstName U10
SYMBOL Opamps\\opamp2 1104 432 R0
WINDOW 3 27 32 Left 2
WINDOW 0 25 8 Left 2
SYMATTR Value MC33274/MC
SYMATTR InstName U2
SYMBOL Opamps\\opamp2 768 416 R0
WINDOW 3 21 110 Left 2
SYMATTR Value MC33274/MC
SYMATTR InstName U3
SYMBOL Opamps\\opamp2 544 608 R0
WINDOW 3 21 110 Left 2
SYMATTR Value MC33274/MC
SYMATTR InstName U4
SYMBOL cap 752 288 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 0
SYMBOL res 1248 624 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R44
SYMATTR Value 1Meg
SYMBOL res 1248 944 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R45
SYMATTR Value 1Meg
SYMBOL nmos 240 -320 M0
WINDOW 0 56 12 Left 2
WINDOW 3 56 37 Left 2
SYMATTR InstName M1
SYMATTR Value IRLHM620
SYMBOL nmos 128 -192 M0
WINDOW 0 56 12 Left 2
WINDOW 3 56 37 Left 2
SYMATTR InstName M2
SYMATTR Value IRLHM620
SYMBOL nmos 352 -448 M0
WINDOW 0 56 12 Left 2
WINDOW 3 56 37 Left 2
SYMATTR InstName M3
SYMATTR Value IRLHM620
SYMBOL voltage -1184 -480 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -47 47 Right 2
WINDOW 3 -49 71 Right 2
SYMATTR InstName Vref
SYMATTR Value 2.5
SYMBOL res -448 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R29
SYMATTR Value 1K
SYMBOL res -608 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R30
SYMATTR Value 24K
SYMBOL res -608 496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R31
SYMATTR Value 24K
SYMBOL res -448 496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R34
SYMATTR Value 1K
SYMBOL Opamps\\opamp2 -640 320 M0
WINDOW 3 21 110 Left 2
SYMATTR Value MC33274/MC
SYMATTR InstName U7
TEXT -1344 616 Left 2 !.tran 60m
TEXT 760 880 Left 2 ;-2V5
TEXT 712 608 Left 2 ;-250mV
TEXT -768 -792 Left 4 ;EEZ current auto-ranging simulation (50 mA / 500 mA / 5 A)\nMore info: www.envox.hr/eez or github.com/eez-open/modular-psu
TEXT -1416 -544 Left 2 ;Existing post-regulator circuit
TEXT -1344 584 Left 2 !.inc motoramp.lib
TEXT -1408 -744 Left 2 ;To I/O Expander inputs
RECTANGLE Normal -848 304 -1440 -560 2
RECTANGLE Normal -848 -592 -1440 -784 2
